<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <title>Vérification</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="container">
    <h2>Vérifier un document</h2>
    <form id="verifyForm">
      <input type="text" name="hash" id="hashInput" placeholder="Entrer le hash du document" required>
      <button type="submit">Vérifier</button>
    </form>
    <div class="link"><a href="index.html">Retour</a></div>
    <div id="result" style="margin-top: 15px; color: #333;"></div>
  </div>

  <script>
    const form = document.getElementById('verifyForm');
    const resultDiv = document.getElementById('result');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const hash = document.getElementById('hashInput').value.trim();
      if (!hash) return;
      try {
        const URL = `http://localhost:3000/?hash=${hash}`
        fetch(URL).then(res => res.json()).then(data => {
          resultDiv.innerHTML = `
          <strong>Document trouvé :</strong><br>
          Hash : ${data.hash}<br>
          Auteur : ${data.owner}<br>
          Date : ${data.timestamp}<br>
          Description : ${data.description || '---'}
        `;
        }).catch(e => console.log(e))
        console.log("hi")

      } catch (err) {
        resultDiv.textContent = ` ${err.message}`;
        console.log(err)
      }
    });
  </script>
</body>

</html>